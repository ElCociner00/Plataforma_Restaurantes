<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cierre de turno</title>
<style>
body {
  font-family: Arial, sans-serif;
  background:#f2f2f2;
}

.container {
  max-width: 650px;
  margin: 40px auto;
  background:white;
  padding: 20px;
  border-radius: 8px;
}

h1 {
  text-align:center;
}

input, textarea, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  background:#000;
  color:white;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#333;
}

#status {
  margin-top: 15px;
  text-align:center;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="container">
<h1>Cierre de turno</h1>

<input id="fecha" type="date">
<input id="responsable" placeholder="Responsable">

<!-- TURNO -->
<select id="turno">
  <option value="">Seleccione turno</option>
  <option value="LS_07:30_02:30">Lunes a Sábado — 07:30 a 02:30</option>
  <option value="LS_02:30_09:00">Lunes a Sábado — 02:30 a 09:00</option>
  <option value="DOM_08:30_02:30">Domingos — 08:30 a 02:30</option>
  <option value="DOM_02:30_08:30">Domingos — 02:30 a 08:30</option>
</select>

<!-- EXTENSION -->
<label>¿Se extendió tu turno?</label>
<select id="extendido" onchange="mostrarExtension()">
  <option value="No">No</option>
  <option value="Si">Sí</option>
</select>

<div id="bloque_extension" style="display:none;">
  <label>¿Cuánto se extendió?</label>
  <select id="cuanto">
    <option value="15">15 minutos</option>
    <option value="30">30 minutos</option>
    <option value="45">45 minutos</option>
    <option value="60">1 hora</option>
    <option value="75">1 hora 15 min</option>
    <option value="90">1 hora 30 min</option>
    <option value="105">1 hora 45 min</option>
    <option value="120">2 horas</option>
    <option value="135">2 horas 15 min</option>
    <option value="150">2 horas 30 min</option>
    <option value="165">2 horas 45 min</option>
    <option value="180">3 horas</option>
  </select>
</div>

<input id="efectivo_apertura" type="number" placeholder="Efectivo Apertura">
<input id="compras_turno" type="number" placeholder="Compras Turno">
<input id="domicilios_turno" type="number" placeholder="Domicilios Turno">
<input id="efectivo_sistema" type="number" placeholder="Efectivo Sistema">
<input id="efectivo_real" type="number" placeholder="Efectivo Real">
<input id="transferencias_sistema" type="number" placeholder="Transferencias Sistema">
<input id="transferencia_real" type="number" placeholder="Transferencia Real">
<input id="rappi_sistema" type="number" placeholder="Rappi Sistema">
<input id="rappi_real" type="number" placeholder="Rappi Real">
<input id="bolsa" type="number" placeholder="Bolsa">
<input id="caja" type="number" placeholder="Caja">
<input id="meta" type="number" placeholder="Meta">

<textarea id="comentarios" placeholder="Comentarios"></textarea>

<button onclick="enviar()">Enviar cierre</button>

<div id="status"></div>
</div>

<script>
function mostrarExtension() {
  const valor = document.getElementById("extendido").value;
  document.getElementById("bloque_extension").style.display = 
    valor === "Si" ? "block" : "none";
}

function enviar() {
  const data = {
    fecha: document.getElementById("fecha").value,
    responsable: document.getElementById("responsable").value,
    turno: document.getElementById("turno").value,
    turno_extendido: document.getElementById("extendido").value,
    minutos_extension: document.getElementById("extendido").value === "Si" 
        ? document.getElementById("cuanto").value 
        : 0,
    efectivo_apertura: document.getElementById("efectivo_apertura").value,
    compras_turno: document.getElementById("compras_turno").value,
    domicilios_turno: document.getElementById("domicilios_turno").value,
    efectivo_sistema: document.getElementById("efectivo_sistema").value,
    efectivo_real: document.getElementById("efectivo_real").value,
    transferencias_sistema: document.getElementById("transferencias_sistema").value,
    transferencia_real: document.getElementById("transferencia_real").value,
    rappi_sistema: document.getElementById("rappi_sistema").value,
    rappi_real: document.getElementById("rappi_real").value,
    bolsa: document.getElementById("bolsa").value,
    caja: document.getElementById("caja").value,
    meta: document.getElementById("meta").value,
    comentarios: document.getElementById("comentarios").value
  };

  fetch("https://n8n.globalnexoshop.com/webhook/abeb7f0c-228e-429f-8abd-3cf0d21a962d", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })
  .then(r => document.getElementById("status").innerText = "Cierre enviado ✔")
  .catch(e => document.getElementById("status").innerText = "Error ❌");
}
</script>

</body>
</html>
