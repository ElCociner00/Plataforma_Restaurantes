<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Permisos</title>

  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/permisos.css">
</head>

<body style="display:none">

  <!-- Guardia de autenticación -->
  <script type="module" src="../js/auth_guard.js"></script>

  <script type="module">
    import { guardPage } from "../js/guard_page.js";
    guardPage("permisos");
  </script>

  <script type="module" src="../js/header.js"></script>
  <script type="module" src="../js/permisos.js"></script>

  <div class="main permisos-main">
    <h1>Permisos</h1>
    <p class="helper-text">
      Administra accesos por empleado y rol. Los cambios se aplican al instante.
    </p>

    <div class="permisos-note" role="note" aria-live="polite">
      <p><strong>Cómo leer el switch:</strong> <strong>activado = NO</strong> (bloquea el acceso), <strong>desactivado = SÍ</strong> (permite acceso por rol/base).</p>
    </div>

    <div id="resumenPermisos" class="resumen-permisos" aria-live="polite"></div>

    <div class="bulk-actions">
      <button type="button" data-role="operativo" data-action="grant">
        Permitir todos los módulos a operativos
      </button>
      <button type="button" data-role="operativo" data-action="revoke">
        Bloquear todos los módulos a operativos
      </button>
      <button type="button" data-role="revisor" data-action="grant">
        Permitir todos los módulos a revisores
      </button>
      <button type="button" data-role="revisor" data-action="revoke">
        Bloquear todos los módulos a revisores
      </button>
      <button type="button" data-role="admin" data-action="grant">
        Permitir todos los módulos a admins
      </button>
      <button type="button" data-role="admin" data-action="revoke">
        Bloquear todos los módulos a admins
      </button>
    </div>

    <div id="permisosTable" class="permisos-table"></div>
    <div id="status" class="status"></div>
  </div>

</body>
</html>
