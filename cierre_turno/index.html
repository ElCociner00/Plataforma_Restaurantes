<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cierre de turno</title>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/cierre_turno.css">
</head>

<body style="display:none">

  <!-- ðŸ” Auth global -->
  <script type="module" src="../js/auth_guard.js"></script>

  <!-- ðŸ” Permisos -->
  <script type="module">
    import { guardPage } from "../js/guard_page.js";
    guardPage("cierre_turno");
  </script>

  <!-- ðŸ§­ Header -->
  <script type="module" src="../js/header.js"></script>

  <div class="main">
    <h1>Cierre de Turno</h1>

    <section class="bloque">
      <h2>InformaciÃ³n del Turno</h2>
      <input id="fecha" type="date">
      <select id="responsable">
        <option value="">Seleccione responsable</option>
      </select>

      <h4>Turno</h4>
      <div class="turno-grid">
        <label>
          Hora inicio
          <input id="hora_inicio" type="time">
        </label>
        <label>
          Hora fin
          <input id="hora_fin" type="time">
        </label>
      </div>

      <div class="apertura-row">
        <label>
          Efectivo Apertura
          <input id="efectivo_apertura" type="text" inputmode="numeric" pattern="[0-9]*">
        </label>
      </div>
    </section>

    <section class="bloque">
  <h2>Datos Financieros</h2>

  <div class="finanzas-grid">
    <div></div>
    <div class="col-title">Sistema</div>
    <div class="col-title">Real</div>
    <div class="col-title">Diferencias</div>

    <div class="finanzas-row" data-field="efectivo">
      <div class="row-title">Efectivo</div>
      <input id="efectivo_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="efectivo_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="efectivo_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="efectivo_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="datafono">
      <div class="row-title">DatÃ¡fono</div>
      <input id="datafono_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="datafono_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="datafono_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="datafono_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="rappi">
      <div class="row-title">Rappi</div>
      <input id="rappi_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="rappi_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="rappi_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="rappi_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="nequi">
      <div class="row-title">Nequi</div>
      <input id="nequi_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="nequi_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="nequi_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="nequi_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="transferencias">
      <div class="row-title">Transferencias</div>
      <input id="transferencias_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="transferencias_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="transferencias_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="transferencias_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="bono_regalo">
      <div class="row-title">Bono de regalo</div>
      <input id="bono_regalo_sistema" type="text" inputmode="numeric" pattern="[0-9]*" readonly>
      <input id="bono_regalo_real" type="text" inputmode="numeric" pattern="[0-9]*">
      <div class="diff-cell">
        <input id="bono_regalo_diferencia" type="text" inputmode="numeric" pattern="[0-9-]*" readonly class="diff-input">
        <div class="diff-note" id="bono_regalo_diferencia_nota"></div>
      </div>
    </div>

    <div class="finanzas-row" data-field="propina">
      <div class="row-title">Propina</div>
      <input id="propina" type="text" inputmode="numeric" pattern="[0-9]*" readonly class="input-span-3">
    </div>

    <div class="finanzas-row" data-field="domicilios">
      <div class="row-title">Domicilios</div>
      <input id="domicilios" type="text" inputmode="numeric" pattern="[0-9]*" readonly class="input-span-3">
    </div>
  </div>

  <textarea placeholder="Comentarios"></textarea>
    </section>

    <section class="bloque">
      <h2>Gastos (extras)</h2>
      <div id="extrasList" class="extras-list"></div>
    </section>

    <section class="bloque">
      <div class="acciones-cierre">
        <div class="consultar-dropdown">
          <button id="consultarToggle" type="button">Consultar â–¾</button>
          <div class="consultar-menu">
            <button id="consultarDatos" type="button">Consultar datos</button>
            <button id="consultarGastos" type="button">Consultar gastos</button>
          </div>
        </div>
        <button id="verificar" disabled>Verificar</button>
        <button id="enviar" disabled>Subir cierre</button>
        <button id="limpiarDatos" type="button">Limpiar datos</button>
      </div>
      <div id="confirmacionEnvio" class="confirmacion-envio is-hidden">
        <p id="mensajeEnvio"></p>
        <p class="confirmacion-pregunta">Â¿EstÃ¡s seguro de subir este cierre?</p>
        <div class="confirmacion-acciones">
          <button id="confirmarEnvio" type="button">SÃ­</button>
          <button id="cancelarEnvio" type="button">No</button>
        </div>
      </div>
      <div id="status"></div>
    </section>
  </div>

  <script type="module" src="../js/cierre_turno.js"></script>

</body>
</html>
